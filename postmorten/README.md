# "Отсутствие строк переводов" (Incident #2023-10-30-01)

 Key               | Value                                            
-------------------|--------------------------------------------------
 Postmorten Owner  | Бурлак Илья                                      
 Date              | 2023-10-30                                       
 Incident          | Пользователи перестали получать строки переводов 
 Priority          | Критический                                      
 Affected Services | Витрины комапнии                                 
 Status            | Разрешено                                        

## Executive Summary

 Time             | Action                                                                                                                                      
------------------|---------------------------------------------------------------------------------------------------------------------------------------------
 2023-10-30 12:00 | Выехал релиз PUB-11346                                                                                                                      
 2023-10-30 12:02 | Было зафиксировано большое количество не найденных строк через аналитические события                                                        
 2023-10-30 12:05 | Был почищен кэш и переводы начали грузиться, но для надежности заблокировали публикацию и откатили релиз.                                   
 2023-10-30 14:40 | После того, как убедились что релиз корректно откачен и в мастере отреверчены изменения по таске PUB-11346, публикация была разблокирована. 

## Postmorten Report

 Instructions    | Report 
-----------------|--------
 Leadup +5 "why" | В новой версии сервиса работы со строками, предполагалась фильтрация по группам. Но перед выкаткой не был почищен кэш и в нем сохранились данные без нового поля группы строк. Из-за этого сервис отдавал пустой массив, вместо массива строкперев дов.
-- | ошибка подгтовки релиза
-- | не досаточно кейзов для тестирование обратной совместимости
-- | не правильная обработка ошибок
Fault | не коррекная логика работы кэша
-- | так как не инвалидировали кэш перед накатом - в нем скопились не верные данные
Impact |  у пользователей, которые зашли или обновили страницу в это время в кабинет отображались ключи перевода, вместо строк. 
Detection | "живая заявка" от коллег из Поддержки
Respone | Заведение инцидента 
-- | заведение задач на доработки мониторинга переводов
-- | изменения политик работы с кэшом
Recover | инвалидация кэша + откат релиза для гарантии стабилизации ситуации
Backlog Check | задач в бэклоге не было
Related Incndents | - 
Lesson Learned | Проверка обратной совместимости на тестовых стейджах - перед накатом релиза
Follow-up Task | DEVOPS-2255